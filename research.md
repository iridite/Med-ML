Step 2: 实现“人脸识别”检索功能

    预训练好模型后，把训练集里所有图片的 Embedding 提取出来，存入 Faiss 索引。

    在 Demo 中上传一张新图，模型提取 Embedding，通过 Faiss 瞬间找回距离最近的 3 张训练集图片及其病理报告。

    演示话术： “表哥，这叫 Case-based Reasoning，模型不只是在瞎猜，它能告诉医生它是参考了哪几个历史确诊案例。”

Step 3: 实现“决策链”可视化

    使用 Grad-CAM 产生热力图。

    演示话术： “看，模型关注的区域正是皮肤病变的边缘浸润带，这符合《临床皮肤病学》的诊断标准。”

Step 4: 实现“因果干预”模拟

    在 Streamlit 左侧放几个侧边栏滑块（代表年龄、病灶大小、解剖部位）。

    点击“运行预测”，右侧显示概率。

    拖动滑块（模拟干预），看概率实时变化。

    演示话术： “我们利用因果推断模型，排除了年龄这个混杂因素，确认了该病变的核心因果变量是色素不均匀度。”

# 【问题】它这里给出来的三个技术要点貌似是相互独立的，并没有很紧密的联系

    Metric Learning (度量学习)： 解决“证据来源”问题。模型将患者数据映射到高维空间，通过计算向量距离，找回最相似的临床金标准案例。

    Decision Chain (决策链)： 解决“逻辑透明”问题。模仿医生的临床路径（Clinical Pathway），将复杂的特征拆解为：基础特征 -> 关键病理征象 -> 疑似诊断。

    Causal Inference (因果推断)： 解决“科学性”问题。通过反事实推理（Counterfactual），排除无关变量的影响，确认是“病因”导致了“结果”，而不是“噪音”。

---

# TODO

1. DOWhy 库引入

2. MONAI 框架

3. 特征提取网络 SwimTransformer / ConvNeXt
